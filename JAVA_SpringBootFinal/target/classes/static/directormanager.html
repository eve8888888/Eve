<!DOCTYPE html>
<html lang="en">
	<head>
    	<meta charset="UTF-8" />
		<title>Dashboard | Fire - Admin Template</title>
		<link rel="stylesheet" href="bootstrap/common/css/bootstrap.css">
		<link rel="stylesheet" href="bootstrap/plugin/table/css/bootstrap-table.css">
		<link href="assets/vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
		<link href="assets/css/style.css" rel="stylesheet" />
		<link rel="stylesheet" href="bootstrap/plugin/sweetalert/css/sweetalert2.css">
		<link rel="stylesheet" href="bootstrap/plugin/validator/css/bootstrapValidator.css">
		<script src="assets/vendor/js/jquery-2.1.1.min.js"></script>
		<script src="assets/vendor/skycons/js/skycons.js"></script>
		<script src="assets/plugins/jquery-ui/js/jquery-ui-1.10.4.min.js"></script>
		<script src="assets/js/core.min.js"></script>
		<script src="assets/js/pages/index.js"></script>
		<script src="bootstrap/common/js/jquery-3.2.1.js"></script>
		<script src="bootstrap/common/js/bootstrap.js"></script>
		<script src="bootstrap/plugin/table/js/bootstrap-table.js"></script>
		<script src="bootstrap/plugin/table/js/bootstrap-table-zh-CN.js"></script>
		<script src="bootstrap/plugin/sweetalert/js/sweetalert2.js"></script>
		<script src="bootstrap/plugin/validator/js/bootstrapValidator.js"></script>
		<script src="bootstrap/plugin/validator/js/language/zh_CN.js"></script>


	</head>
	
	<body>
	
		<!-- Start: Header -->
		<div class="navbar" role="navigation">
			<div class="container-fluid container-nav">
				<!-- Navbar Action -->
				<ul class="nav navbar-nav navbar-actions navbar-left">
					<li class="visible-md visible-lg"><a href="#" id="main-menu-toggle"><i class="fa fa-th-large"></i></a></li>
					<li class="visible-xs visible-sm"><a href="#" id="sidebar-menu"><i class="fa fa-navicon"></i></a></li>			
				</ul>
				<!-- Navbar Left -->
				<div class="navbar-left">
					<!-- Search Form -->					
					<form class="search navbar-form">
						<div class="input-group input-search">
							<input type="text" class="form-control bk-radius" name="q" id="q" placeholder="Search...">
							<span class="input-group-btn">
								<button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>
							</span>
						</div>						
					</form>
				</div>
				<!-- Navbar Right -->
				<div class="navbar-right">					
					<!-- Notifications -->
					<ul class="notifications hidden-xs">						
						<li>
							<a href="#" class="dropdown-toggle notification-icon" data-toggle="dropdown">
								<i class="fa fa-tasks"></i>
								<span class="badge">10</span>
							</a>
							<ul class="dropdown-menu update-menu" role="menu">
								<li><a href="#"><i class="fa fa-database bk-fg-primary"></i> Database </a></li>
								<li><a href="#"><i class="fa fa-bar-chart-o bk-fg-primary"></i> Connection </a></li>
								<li><a href="#"><i class="fa fa-bell bk-fg-primary"></i> Notification </a></li>
								<li><a href="#"><i class="fa fa-envelope bk-fg-primary"></i> Message </a></li>
								<li><a href="#"><i class="fa fa-flash bk-fg-primary"></i> Traffic </a></li>
								<li><a href="#"><i class="fa fa-credit-card bk-fg-primary"></i> Invoices </a></li>
								<li><a href="#"><i class="fa fa-dollar bk-fg-primary"></i> Finances </a></li>
								<li><a href="#"><i class="fa fa-thumbs-o-up bk-fg-primary"></i> Orders </a></li>
								<li><a href="#"><i class="fa fa-folder bk-fg-primary"></i> Directories </a></li>
								<li><a href="#"><i class="fa fa-users bk-fg-primary"></i> Users </a></li>		
							</ul>
						</li>
						<li>
							<a href="#" class="dropdown-toggle notification-icon" data-toggle="dropdown">
								<i class="fa fa-envelope"></i>
								<span class="badge">5</span>
							</a>
							<ul class="dropdown-menu">
								<li class="dropdown-menu-header">
									<strong>Messages</strong>
									<div class="progress progress-xs  progress-striped active">
										<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
											60%
										</div>
									</div>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" src="assets/img/avatar1.jpg" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>1 minute ago</small></span>							
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" src="assets/img/avatar2.jpg" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>3 minute ago</small></span>								
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" src="assets/img/avatar3.jpg" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>4 minute ago</small></span>								
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" src="assets/img/avatar4.jpg" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>30 minute ago</small></span>
									</a>
								</li>
								<li class="avatar">
									<a href="page-inbox.html">
										<img class="avatar" src="assets/img/avatar5.jpg" alt="" />
										<div><div class="point point-primary point-lg"></div>New message</div>
										<span><small>1 hours ago</small></span>
									</a>
								</li>						
								<li class="dropdown-menu-footer text-center">
									<a href="page-inbox.html">View all messages</a>
								</li>	
							</ul>
						</li>
						<li>
							<ul class="dropdown-menu list-group">
								<li class="dropdown-menu-header">
									<strong>Notifications</strong>
									<div class="progress progress-xs  progress-striped active">
										<div class="progress-bar progress-bar-danger" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
											60%
										</div>
									</div>
								</li>
								<li class="list-item">
									<a href="page-inbox.html">
										<div class="pull-left">
										   <i class="fa fa-envelope-o bk-fg-primary"></i>
										</div>
										<div class="media-body clearfix">
											<div>Unread Message</div>
											<h6>You have 10 unread message</h6>
										</div>								
									</a>
								</li>
								<li class="list-item">
									<a href="#">
										<div class="pull-left">
										   <i class="fa fa-cogs bk-fg-primary"></i>
										</div>
										<div class="media-body clearfix">
											<div>New Settings</div>
											<h6>There are new settings available</h6>
										</div>								
									</a>
								</li>
								<li class="list-item">
									<a href="#">
										<div class="pull-left">
										   <i class="fa fa-fire bk-fg-primary"></i>
										</div>
										<div class="media-body clearfix">
											<div>Update</div>
											<h6>There are new updates available</h6>
										</div>								
									</a>
								</li>
								<li class="list-item-last">
									<a href="#">
									  <h6>Unread notifications</h6>
									  <span class="badge">15</span>
									</a>
								</li>
							</ul>
						</li>
					</ul>
					<!-- End Notifications -->					
					<!-- Userbox -->
					<div class="userbox">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<div class="profile-info">
								<span class="name">注册</span>
							</div>
							<div class="profile-info">
								<span class="name">John Smith Doe</span>
								<span class="role"><i class="fa fa-circle bk-fg-success"></i> Administrator</span>
							</div>			
							<i class="fa custom-caret"></i>
						</a>
						<div class="dropdown-menu">
							<ul class="list-unstyled">
								<li class="dropdown-menu-header bk-bg-white bk-margin-top-15">						
									<div class="progress progress-xs  progress-striped active">
										<div class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;">
											60%
										</div>
									</div>							
								</li>	
								<li>
									<a href="page-profile.html"><i class="fa fa-user"></i> Profile</a>
								</li>
								<li>
									<a href="#"><i class="fa fa-wrench"></i> Settings</a>
								</li>
								<li>
									<a href="page-invoice"><i class="fa fa-usd"></i> Payments</a>
								</li>
								<li>
									<a href="#"><i class="fa fa-file"></i> File</a>
								</li>
								<li>
									<a href="page-login.html"><i class="fa fa-power-off"></i> Logout</a>
								</li>
							</ul>
						</div>						
					</div>
					<!-- End Userbox -->
				</div>
				<!-- End Navbar Right -->
			</div>		
		</div>

		
		<!-- Start: Content -->
		<div class="container-fluid content">	
			<div class="row">
			
				<!-- Sidebar -->
				<div class="sidebar">
					<div class="sidebar-collapse">
						<!-- Sidebar Header Logo-->
						<div class="sidebar-header">
							<img src="assets/img/logo.png" class="img-responsive" alt="" />
						</div>
						<!-- Sidebar Menu-->
						<div class="sidebar-menu">						
							<nav id="menu" class="nav-main" role="navigation">
								<ul class="nav nav-sidebar">
									<div class="panel-body text-center">								
										<div class="flag">
											<img src="assets/img/flags/timg.jpg" class="img-flags" alt="" width="90" height="80"/>
										</div>
									</div>
									<li class="active">
										<a href="director.html">
											<i class="fa fa-laptop" aria-hidden="true"></i><span>Dashboard</span>
										</a>
									</li>
									<li>
										<a href="mailbox-inbox.html">
											<span class="pull-right label label-danger">235</span>
											<i class="fa fa-envelope" aria-hidden="true"></i><span>Mail</span>
										</a>
									</li>
									<li class="nav-parent">
										<a>
											<i class="fa fa-copy" aria-hidden="true"></i><span>导演管理模块</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="director.html"><span class="text">导演查看主页面</span></a></li>
											<li><a href="directormanager.html"><span class="text"> 导演的管理页面</span></a></li>
											<li><a href="page-timeline.html"><span class="text"> 导演的</span></a></li>
											<li><a href="page-invoice.html"><span class="text"> Invoice</span></a></li>
											<li><a href="page-pricing-tables.html"><span class="text"> Pricing Tables</span></a></li>
											<li><a href="page-login.html"><span class="text"> Login Page</span></a></li>
											<li><a href="page-register.html"><span class="text"> Register Page</span></a></li>
											<li><a href="page-recover-password.html"><span class="text"> Recover Password</span></a></li>
											<li><a href="page-lockscreen1.html"><span class="text"> Lock Screen 1</span></a></li>
											<li><a href="page-lockscreen2.html"><span class="text"> Lock Screen 2</span></a></li>
											<li><a href="page-404.html"><span class="text"> Page 404</span></a></li>
											<li><a href="page-500.html"><span class="text"> Page 500</span></a></li>
										</ul>
									</li>
									<li class="nav-parent">
										<a>
											<i class="fa fa-tasks" aria-hidden="true"></i><span>UI Elements</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="ui-basic-elements.html"><span class="text"> Basic Elements</span></a></li>
											<li><a href="ui-nestable-list.html"><span class="text"> Nestable</span></a></li>
											<li><a href="ui-buttons.html"><span class="text"> Buttons</span></a></li>
											<li><a href="ui-progress-bars.html"><span class="text"> Progress Bars</span></a></li>
											<li><a href="ui-sliders.html"><span class="text"> Sliders</span></a></li>
											<li><a href="ui-panels.html"><span class="text"> Panels</span></a></li>
											<li><a href="ui-tabs.html"><span class="text"> Tabs</span></a></li>
											<li><a href="ui-notifications.html"><span class="text"> Notifications</span></a></li>
											<li><a href="ui-modals.html"><span class="text"> Modals</span></a></li>
											<li><a href="ui-portlets.html"><span class="text"> Portlets</span></a></li>	
											<li><a href="ui-lightbox.html"><span class="text"> Lightbox</span></a></li>
											<li><a href="ui-carousels.html"><span class="text"> Carousels</span></a></li>
											<li><a href="ui-animation.html"><span class="text"> Animation</span></a></li>											
										</ul>
									</li>
									<li class="nav-parent">
										<a>
											<i class="fa fa-list-alt" aria-hidden="true"></i><span>Forms</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="form-elements.html"><span class="text"> Elements</span></a></li>
											<li><a href="form-wizard.html"><span class="text"> Wizard</span></a></li>
											<li><a href="form-validation.html"><span class="text"> Validation</span></a></li>
											<li><a href="form-dropzone.html"><span class="text"> Dropzone Upload</span></a></li>
											<li><a href="form-editors.html"><span class="text"> Editors</span></a></li>
											<li><a href="form-x-editable.html"><span class="text"> X-Editable</span></a></li>
										</ul>
									</li>
									<li class="nav-parent">
										<a>
											<i class="fa fa-table" aria-hidden="true"></i><span>Tables</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="table-basic.html"><span class="text"> Basic</span></a></li>
											<li><a href="table-advanced.html"><span class="text"> Advanced</span></a></li>
											<li><a href="table-responsive.html"><span class="text"> Responsive</span></a></li>
											<li><a href="table-editable.html"><span class="text"> Editable</span></a></li>
										</ul>
									</li>
									<li class="nav-parent">
										<a>
											<i class="fa fa-random" aria-hidden="true"></i><span>Visual Chart</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="chart-flot.html"><span class="text"> Flot Chart</span></a></li>
											<li><a href="chart-xchart.html"><span class="text"> xChart</span></a></li>
											<li><a href="chart-other.html"><span class="text"> Other</span></a></li>
										</ul>
									</li>									
									<li>
										<a href="widgets.html">
											<i class="fa fa-life-bouy" aria-hidden="true"></i><span>Widgets</span>
										</a>
									</li>
									<li>
										<a href="gallery.html">
											<i class="fa fa-picture-o" aria-hidden="true"></i><span>Gallery</span>
										</a>
									</li>
									<li>
										<a href="calendar.html">
											<i class="fa fa-calendar" aria-hidden="true"></i><span>Calendar</span>
										</a>
									</li>
									<li class="nav-parent">
										<a>
											<i class="fa fa-map-marker" aria-hidden="true"></i><span>Maps</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="map-basic.html"><span class="text"> Basic</span></a></li>
											<li><a href="map-vector.html"><span class="text"> Vector</span></a></li>
										</ul>
									</li>
									<li>
										<a href="typography.html">
											<i class="fa fa-font" aria-hidden="true"></i><span>Typography</span>
										</a>
									</li>
									<li class="nav-parent">
										<a>
											<i class="fa fa-bolt" aria-hidden="true"></i><span>Icons</span>
										</a>
										<ul class="nav nav-children">
											<li><a href="icons-font-awesome.html"><span class="text"> Font Awesome</span></a></li>
											<li><a href="icons-weathericons.html"><span class="text"> Weather Icons</span></a></li>
											<li><a href="icons-glyphicons.html"><span class="text"> Glyphicons</span></a></li>
										</ul>
									</li>
								</ul>
							</nav>
						</div>
						<!-- End Sidebar Menu-->
					</div>
					<!-- Sidebar Footer-->
					<div class="sidebar-footer">					
						<div class="small-chart-visits">
							<div class="small-chart" id="sparklineLineVisits"></div>
							<div class="small-chart-info">
								<label>New Visits</label>
								<strong>70,79%</strong>
							</div>
							<script type="text/javascript">
								var sparklineLineVisitsData = [15, 16, 17, 19, 15, 25, 23, 35, 29, 15, 30, 45];
							</script>
						</div>
						<ul class="sidebar-terms bk-margin-top-10">
							<li><a href="#">Terms</a></li>
							<li><a href="#">Privacy</a></li>
							<li><a href="#">Help</a></li>
							<li><a href="#">About</a></li>
						</ul>					
					</div>
					<!-- End Sidebar Footer-->
				</div>
				<!-- End Sidebar -->
						
				<!-- Main Page -->
				<div class="main ">
					<!-- Page Header -->
					<div class="page-header">
						<div class="pull-left">
							<ol class="breadcrumb visible-sm visible-md visible-lg">								
								<li><a href="index.html"><i class="icon fa fa-home"></i>Home</a></li>
								<li class="active"><i class="fa fa-laptop"></i>Dashboard</li>
							</ol>						
						</div>
						<div class="pull-right">
							<h2>Dashboard</h2>
						</div>					
					</div>
					<!-- End Page Header -->

					<div class="tpl-content-wrapper">
						<div class="panel-heading">
							<h3 class="panel-title">导演查询</h3>
						</div>

						<div class="panel panel-success">

						</div>

						<div class="panel panel-success">

							<div class="panel-heading">
								<h3 class="panel-title">导演查询</h3>
							</div>

							<div class="panel-body">

								<div class="row">

									<div class="col-md-3">
										<input type="text" name="name" placeholder="请输入导演姓名" class="form-control" id="searchNameId">
									</div>

									<div class="col-md-3">
										<input type="text" name="desc" placeholder="请输入导演简介" class="form-control" id="searchDescId">
									</div>

									<div class="col-md-3">
										<input type="button" class="btn btn-primary" value="导演查询" id="searchBtn">
									</div>

								</div>
							</div>

						</div>


						<div class="btn-group" role="group">
							<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addModal"><span class="glyphicon glyphicon-plus"></span>增加</button>
							<button type="button" class="btn btn-warning" id="updateId"><span class="glyphicon glyphicon-pencil"></span>修改</button>
							<button type="button" class="btn btn-danger" id="deleteId"><span class="glyphicon glyphicon-remove"></span>删除</button>
						</div>

						<div class="row">
							<table id="tableId">
							</table>
						</div>

					</div>

				</div>
				<!-- End Main Page -->

			</div>
		</div>



		<!--模态框区域-->
		<!-- 添加模态框 -->
		<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="addModalLabel">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" id="addModalLabel">添加导演</h4>
					</div>
					<div class="modal-body">
						<form class="form-horizontal" id="addFormId">
							<div class="form-group">
								<label class="control-label col-md-3">导演姓名</label>
								<div class="col-md-9">
									<input type="text" name="name" placeholder="请输入导演姓名" class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-md-3">导演简介</label>
								<div class="col-md-9">
									<textarea  name="desc" rows="6" class="form-control"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-md-3">导演照片</label>
								<div class="col-md-9">
									<input type="file" name="picUpload"  id="picId">
									<input type="text" name="pic" id="picNameId" class="form-control">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-md-3"></label>
								<div class="col-md-9">
									<input type="button"  value="添加导演" class="form-control btn btn-success" id="addConfirmId">
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div><!-- 添加模态框end -->




		<!----修改模态框  --->
		<div class="modal fade" id="updateModal" tabindex="-1" role="dialog" >
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title" >修改导演信息</h4>
					</div>
					<div class="modal-body">
						<form class="form-horizontal" id="updateFormId">
							<div class="form-group">
								<label class="control-label col-md-3">编号:</label>
								<div class="col-md-9">
									<input type="text" class="form-control"  name="id"  readonly>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-md-3">姓名:</label>
								<div class="col-md-9">
									<input type="text" class="form-control" placeholder="请输入导演姓名" name="name" >
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-md-3">简介:</label>
								<div class="col-md-9">
									<textarea class="form-control" name="desc" rows="6"></textarea>
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-md-3">图片:</label>
								<div class="col-md-9">
									<input type="file" name="picUpload" id="updatePicId">
									<input type="text" name="pic" class="form-control" id="updatePicNameId">
								</div>
							</div>
							<div class="form-group">
								<label class="control-label col-md-3"></label>
								<div class="col-md-4">
									<input type="button" class="form-control btn btn-primary" value="确定" id="updateConfirmId">
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div><!----修改模态框end  --->



		<script>
            $(function () {
                $("#tableId").bootstrapTable({
                    url:'findDirectors.action',
                    pagination:true,
                    pageSize:5,
                    pageList:[1,4,5,8],
                    search:true,
                    columns:[
                        {
                            checkbox:true
                        },
                        {
                            field:'id',
                            title:'编号'
                        },
                        {
                            field:'name',
                            title:'姓名'
                        },
                        {
                            field:'desc',
                            title:'描述'
                        },
                        {
                            field:'pic',
                            title:'照片'
                        }]
                });
                //添加
                $("#addConfirmId").click(function () {
                    var _data = $("#addFormId").serialize();
                    $.ajax({
                        url:'addDirector.action',
                        type:'post',
                        data:_data,
                        dataType:'text',
                        success:function (msg) {
                            $("#addModal").modal('hide');
                            $("#tableId").bootstrapTable('refresh');
                            swal({
                                title:'添加提示',
                                text:msg,
                                type:'success'
                            })
                        }
                    })
                });
                //修改
				$("#updateConfirmId").click(function () {
					var _data = $("#updateFormId").serialize();
					$.ajax({
                        url:'updateDirector.action',
                        type:'post',
                        data:_data,
                        dataType:'text',
                        success:function (msg) {
                            $("#updateModal").modal('hide');
                            $("#tableId").bootstrapTable('refresh');
                            swal({
                                title:'添加提示',
                                text:msg,
                                type:'success'
                            })
                        }
					})
                })
				//修改放值的部分
				$("#updateId").click(function () {
					var rows = $("#tableId").bootstrapTable('getSelections');
					if(rows.length < 1){
                        swal({
                            title:'修改提示',
                            text:'您还未选中修改的项',
                            type:'warning'
                        })
					}else if(rows.length >1){
                        swal({
                            title:'修改提示',
                            text:'每次只能修改一项',
                            type:'warning'
                        })
					}else {
					    var director = $("#tableId").bootstrapTable('getSelections')[0];
					    $("#updateFormId input[name = id]").val(director.id);
					    $("#updateFormId input[name = name]").val(director.name);
					    $("#updateFormId textarea").val(director.desc);
					    $("#updateFormId input[name = pic]").val(director.pic);
					    $("#updateModal").modal('show')
					}
                })

				$("#deleteId").click(function () {
					var rows =$("#tableId").bootstrapTable('getSelections');
					var _ids = $.map(rows,function (row) {
						return row.id;
                    });
					if(rows<1){
                        swal({
                            title:'修改提示',
                            text:'您还未选中删除的项',
                            type:'error'
                        })
					}else {
					    $.post('deleteDirector.action',{ids:_ids.join()},function (msg) {
					        $("#tableId").bootstrapTable('refresh');
                            swal({
                                title:'删除提示',
                                text:msg,
                                type:'success'
                            })
                        })
					}
                })
				//模糊查询部分
                $("#searchBtn").click(function () {
                    $("#tableId").bootstrapTable('refresh',{
                        url:'findDirectorsByLikenameOrdesc.action',
                        query:{
                            name:$("#searchNameId").val(),
                            desc:$("#searchDescId").val()
                        }
                    })
                })

            })
		</script>
	</body>
	
</html>